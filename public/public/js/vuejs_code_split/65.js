(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{258:function(t,e,a){"use strict";a.r(e);var s={name:"EstimateShowEE",components:{},mounted:function(){var t=this;axios.get("/api/estimateShow/"+this.$route.params.id,{headers:{Authorization:"Bearer ".concat(this.$store.getters.currentUser.token)}}).then((function(e){console.log(e.data),t.estimate=e.data.estimate,t.form=e.data.form,t.security_deposit=e.data.security_deposit,t.loading=!1})).catch((function(e){t.loading=!1,404===e.response.status&&t.$router.push("/")}))},data:function(){return{security_deposit:{},form:{},loading:!0,modal:!1,contact:null,modalA:!1,modalEstimateEdit:!1,currentUser:this.$store.getters.currentUser,estimate:{id:"",road_name:"",length:"",breadth:"",area:"",rate:"",amount:"",deposit:"",total:"",form_id:this.$route.params.id,division_id:""}}},computed:{AREA:function(){this.estimate.area=Number((this.estimate.length*this.estimate.breadth).toFixed(2)),this.estimate.amount=Number((this.estimate.area*this.estimate.rate).toFixed(2))},TOTAL:function(){console.log("when is the total workignl??"),this.estimate.amount=Number((this.estimate.area*this.estimate.rate).toFixed(2)),this.estimate.deposit=Number((10*this.estimate.amount/100).toFixed(2)),this.estimate.total=Number((this.estimate.amount+this.estimate.deposit).toFixed(2))},waveoff:function(){console.log("waveoff is running boy"),this.estimate.total=Number(this.estimate.amount.toFixed(2))}},methods:{estimateSubmit:function(){var t=this;axios.patch("/api/estimateEditApprove",this.estimate,{headers:{Authorization:"Bearer ".concat(this.$store.getters.currentUser.token)}}).then((function(e){console.log(e),console.log(t.modalEstimateEdit),console.log(t.estimate),t.$router.push("/UnapprovedEstimatedLIstEE/")})).catch((function(e){t.errors=e.response.data.errors}))},destroy:function(){var t=this;axios.delete("/api/contacts/"+this.$route.params.id).then((function(e){t.$router.push("/contacts")})).catch((function(t){alert("Internal Error. Unable to delete contact.")}))},approve:function(){var t=this;axios.patch("/api/auth/estimateStatus/"+this.$route.params.id).then((function(e){t.$router.push("/UnapprovedEstimatedListEE/")})).catch((function(t){alert("Internal Error. Unable to approve form.")}))},printme:function(){window.print()}}},i=a(0),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative"},[t.modalA?a("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 z-10 bg-black opacity-25",on:{click:function(e){t.modalA=!t.modalA}}}):t._e(),t._v(" "),t.modal?a("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 z-10 bg-black opacity-25",on:{click:function(e){t.modal=!t.modal}}}):t._e(),t._v(" "),t.modalEstimateEdit?a("div",{staticClass:"absolute top-0 bottom-0 left-0 right-0 bg-black opacity-25 z-15",on:{click:function(e){t.modalEstimateEdit=!t.modalEstimateEdit}}}):t._e(),t._v(" "),t.modalEstimateEdit?a("form",{staticClass:"absolute left-0 right-0 z-50 w-11/12 ml-auto mr-auto bg-white rounded-lg top-2 md:w-4/5 lg:w-1/2",on:{submit:function(e){return e.preventDefault(),t.estimateSubmit.apply(null,arguments)}}},[a("div",{staticClass:"px-12 py-4"},[a("p",{staticClass:"py-2 text-xl bold"},[t._v("Estimate Calculator ")]),t._v(" "),a("div",{staticClass:"relative py-3 "},[a("label",{staticClass:"absolute px-2 py-2 text-xs uppercase text-textblue",attrs:{for:"road_name"}},[t._v("Road Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estimate.road_name,expression:"estimate.road_name"}],staticClass:"w-full px-2 pt-6 pb-1 text-gray-900 border rounded-lg focus:outline-none ",attrs:{id:"road_name",type:"text",placeholder:"Road name chhu lut rawh le",autofocus:""},domProps:{value:t.estimate.road_name},on:{input:function(e){e.target.composing||t.$set(t.estimate,"road_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"relative py-3 "},[a("label",{staticClass:"absolute px-2 py-2 text-xs uppercase text-textblue",attrs:{for:"road_type"}},[t._v("Road Type")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estimate.road_type,expression:"estimate.road_type"}],staticClass:"w-full px-2 pt-6 pb-1 text-gray-900 border rounded-lg focus:outline-none ",attrs:{id:"road_type",type:"text",placeholder:"Road type chhu lut rawh le",autofocus:""},domProps:{value:t.estimate.road_type},on:{input:function(e){e.target.composing||t.$set(t.estimate,"road_type",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"relative py-3 "},[a("label",{staticClass:"absolute px-2 py-2 text-xs uppercase text-textblue",attrs:{for:"length"}},[t._v("Length")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estimate.length,expression:"estimate.length"}],staticClass:"w-full px-2 pt-6 pb-1 text-gray-900 border rounded-lg focus:outline-none ",attrs:{id:"length",type:"text",placeholder:"number chhu lut rawh le",autofocus:""},domProps:{value:t.estimate.length},on:{input:[function(e){e.target.composing||t.$set(t.estimate,"length",e.target.value)},t.AREA]}})]),t._v(" "),a("div",{staticClass:"relative pb-3 "},[a("label",{staticClass:"absolute px-2 py-2 text-xs uppercase text-textblue",attrs:{for:"breadth"}},[t._v("Breadth")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estimate.breadth,expression:"estimate.breadth"}],staticClass:"w-full px-2 pt-6 pb-1 text-gray-900 border rounded-lg focus:outline-none ",attrs:{id:"breadth",type:"text",placeholder:"number chhu lut rawh le",autofocus:""},domProps:{value:t.estimate.breadth},on:{input:[function(e){e.target.composing||t.$set(t.estimate,"breadth",e.target.value)},t.AREA]}})]),t._v(" "),a("div",{staticClass:"relative pb-3 "},[a("label",{staticClass:"absolute px-2 py-2 text-xs uppercase text-textblue",attrs:{for:"rate"}},[t._v("Rate(INR)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estimate.rate,expression:"estimate.rate"}],staticClass:"w-full px-2 pt-6 pb-1 text-gray-900 border rounded-lg focus:outline-none ",attrs:{id:"rate",type:"text",placeholder:"number chhu lut rawh le",autofocus:""},domProps:{value:t.estimate.rate},on:{input:[function(e){e.target.composing||t.$set(t.estimate,"rate",e.target.value)},t.TOTAL]}})]),t._v(" "),a("div",{staticClass:"grid grid-cols-2 gap-0 md:grid-cols-2 md:gap-2"},[a("div",{staticClass:"px-4 py-5 bg-white rounded-lg shadow "},[a("p",{staticClass:"text-sm text-gray-400"},[t._v("Area")]),t._v(" "),a("p",{staticClass:"text-xl text-blue-400"},[t._v("\n                        "+t._s(t.estimate.area)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"px-4 py-5 text-xl text-blue-400 bg-white rounded-lg shadow"},[a("p",{staticClass:"text-sm text-gray-400"},[t._v("Amount (INR)")]),t._v(" "),a("p",{staticClass:"text-xl text-blue-400"},[t._v("\n                        Rs."+t._s(t.estimate.amount)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"px-4 py-5 bg-white rounded-lg shadow "},[a("p",{staticClass:"text-sm text-gray-400"},[t._v("Deposit")]),t._v(" "),a("p",{staticClass:"text-xl text-blue-400"},[t._v("\n                        Rs."+t._s(t.estimate.deposit)+"\n                    ")])]),t._v(" "),a("div",{staticClass:"px-4 py-5 text-xl text-blue-400 bg-white rounded-lg shadow"},[a("p",{staticClass:"text-sm text-gray-400"},[t._v("Total(INR)")]),t._v(" "),a("p",{staticClass:"text-xl text-blue-400"},[t._v("\n                        Rs."+t._s(t.estimate.total)+"\n                    ")])])]),t._v(" "),1==t.security_deposit.status?[a("button",{staticClass:"flex items-center px-5 py-1 mt-4 text-sm rounded-lg shadow border-buttonpink text-buttonpink hover:text-red-400 sm:mt-6 focus:outline-none",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.waveoff.apply(null,arguments)}}},[t._v("\n                    Wave Off Security Deposit\n                ")])]:t._e(),t._v(" "),a("div",{staticClass:"relative pt-1 pb-3"},[a("div",{staticClass:"flex justify-between"},[a("button",{staticClass:"flex items-center px-5 py-1 mt-4 text-sm text-white rounded-lg shadow bg-buttonpink hover:bg-red-500 sm:mt-6 focus:outline-none",attrs:{type:"submit"}},[t._v("\n                        Submit\n                    ")]),t._v(" "),a("button",{staticClass:"items-center px-5 py-1 mt-4 ml-1 text-sm text-red-500 border border-red-500 rounded sm:mt-6 hover:border-red-300 focus:outline-none",on:{click:function(e){t.modalEstimateEdit=!t.modalEstimateEdit}}},[t._v("Cancel")])]),t._v(" "),a("p",{staticClass:"mt-4 text-sm italic text-gray-500"},[t._v("Note: Click Submit to Approve")])])],2)]):t._e(),t._v(" "),t.modalA?a("div",{staticClass:"absolute left-0 right-0 z-40 w-11/12 h-64 ml-auto mr-auto bg-white rounded-lg shadow top-2 md:3/5 lg:w-2/4 xl:w-1/4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.approve.apply(null,arguments)}}},[a("div",{staticClass:"absolute top-0 right-0 "},[a("button",{staticClass:"px-2 py-2 mt-4 mr-6 rounded hover:bg-gray-200",on:{click:function(e){t.modalA=!t.modalA}}},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"11.877",height:"11.877",viewBox:"0 0 11.877 11.877"}},[a("g",{attrs:{id:"Group_9","data-name":"Group 9",transform:"translate(-1238.562 -230.423)"}},[a("path",{attrs:{id:"Path_35","data-name":"Path 35",d:"M3285,232l8.847,8.847",transform:"translate(-2045 0.015)",fill:"none",stroke:"#e37198","stroke-linecap":"round","stroke-width":"2"}}),t._v(" "),a("path",{attrs:{id:"Path_36","data-name":"Path 36",d:"M0,0,8.847,8.847",transform:"matrix(0.017, 1, -1, 0.017, 1248.846, 231.862)",fill:"none",stroke:"#e37198","stroke-linecap":"round","stroke-width":"2"}})])])])]),t._v(" "),a("div",{staticClass:"flex justify-center my-6 text-xl font-bold text-textblueform "},[t._v("Approve Estimate")]),t._v(" "),a("label",{staticClass:"flex justify-center px-4 py-2 font-bold text-blue-500 text-md"},[t._v("Do you want to approve this\n                Estimate")]),t._v(" "),a("div",{staticClass:"flex items-center justify-center pt-2 "},[a("button",{staticClass:"px-4 py-2 text-sm font-bold text-white bg-green-500 rounded hover:bg-green-400",on:{click:t.approve}},[t._v("Yes")]),t._v(" "),a("button",{staticClass:"px-4 py-1 ml-1 text-red-500 border border-red-500 rounded hover:border-red-300",on:{click:function(e){t.modalA=!t.modalA}}},[t._v("Cancel")])])])]):t._e(),t._v(" "),a("div",{staticClass:"flex flex-col md:mt-6 md:ml-6 sm:w-full md:w-4/5 lg:w-3/5"},[t.loading?a("div",[t._v("\n            Loading...\n        ")]):a("div",[a("a",{staticClass:"text-blue-400",attrs:{href:"#"},on:{click:function(e){return t.$router.back()}}},[t._v("\n                 Back\n                 ")]),t._v(" "),a("div",{staticClass:"flex flex-row items-center justify-between h-auto py-4 mt-3 bg-white border-b-4 border-dashed rounded-t-lg rounded-b-lg"},[a("div",{staticClass:"flex flex-col ml-8"},[a("p",{staticClass:"text-sm font-light"},[t._v("Memo No ")]),t._v(" "),a("p",{staticClass:"text-lg font-medium"},[t._v(t._s(t.form.memo))])]),t._v(" "),a("button",{staticClass:"px-4 py-1 mr-1 text-white rounded-lg hover:bg-gray-300",on:{click:function(e){return e.preventDefault(),t.printme.apply(null,arguments)}}},[a("svg",{attrs:{height:"30pt",viewBox:"-27 -67 859.31017 859",width:"30pt",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"m738.554688 628.5h-107.414063c-7.421875 0-13.429687-6.003906-13.429687-13.425781s6.007812-13.425781 13.429687-13.425781h107.414063c22.207031 0 40.277343-18.066407 40.277343-40.28125v-322.242188c0-22.207031-18.066406-40.277344-40.277343-40.277344h-671.335938c-22.210938 0-40.28125 18.070313-40.28125 40.277344v322.242188c0 22.214843 18.066406 40.28125 40.28125 40.28125h107.410156c7.417969 0 13.429688 6.003906 13.429688 13.425781s-6.011719 13.425781-13.429688 13.425781h-107.410156c-37.019531 0-67.1367188-30.117188-67.1367188-67.132812v-322.242188c0-37.007812 30.1171878-67.132812 67.1367188-67.132812h671.335938c37.015624 0 67.132812 30.125 67.132812 67.132812v322.242188c0 37.015624-30.117188 67.132812-67.132812 67.132812zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m644.566406 198.847656h-483.363281v-201.402344h483.363281zm-456.507812-26.855468h429.652344v-147.691407h-429.652344zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m644.566406 722.488281h-483.363281v-322.242187h483.363281zm-456.507812-26.851562h429.652344v-268.535157h-429.652344zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m671.417969 427.101562h-537.066407c-7.417968 0-13.429687-6.007812-13.429687-13.425781 0-7.421875 6.011719-13.429687 13.429687-13.429687h537.066407c7.421875 0 13.429687 6.007812 13.429687 13.429687 0 7.425781-6.007812 13.425781-13.429687 13.425781zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m564.003906 494.234375h-322.238281c-7.417969 0-13.429687-6.007813-13.429687-13.425781 0-7.421875 6.011718-13.429688 13.429687-13.429688h322.238281c7.421875 0 13.429688 6.007813 13.429688 13.429688 0 7.417968-6.007813 13.425781-13.429688 13.425781zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m564.003906 547.941406h-322.238281c-7.417969 0-13.429687-6-13.429687-13.425781 0-7.421875 6.011718-13.429687 13.429687-13.429687h322.238281c7.421875 0 13.429688 6.007812 13.429688 13.429687 0 7.417969-6.007813 13.425781-13.429688 13.425781zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m564.003906 601.648438h-322.238281c-7.417969 0-13.429687-6-13.429687-13.425782 0-7.421875 6.011718-13.429687 13.429687-13.429687h322.238281c7.421875 0 13.429688 6.007812 13.429688 13.429687 0 7.417969-6.007813 13.425782-13.429688 13.425782zm0 0"}}),t._v(" "),a("path",{attrs:{d:"m564.003906 655.355469h-322.238281c-7.417969 0-13.429687-6.007813-13.429687-13.425781 0-7.421876 6.011718-13.429688 13.429687-13.429688h322.238281c7.421875 0 13.429688 6.007812 13.429688 13.429688 0 7.417968-6.007813 13.425781-13.429688 13.425781zm0 0"}})])])]),t._v(" "),a("div",{staticClass:"h-auto px-4 py-4 bg-white border-gray-200 rounded-t-lg rounded-b-lg"},[a("div",{staticClass:"grid grid-cols-2 gap-2 ml-1 md:ml-4"},[t._m(0),t._v(" "),a("span"),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Name")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.name))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Email ID")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.email))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Phone Number")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.phone))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Residence Address")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.rhouseno)+", "+t._s(t.form.rlocalcouncil_name))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Roadcutting Address")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.houseno)+", "+t._s(t.form.localcouncil_name))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Engineer I/C")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.engineer_name)+", "+t._s(t.form.engineer_post))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Engg I/C Phone")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.form.engineer_phone))]),t._v(" "),a("p",{staticClass:"py-1 mb-1"},[t._v("Form Submitted")]),t._v(" "),a("p",{staticClass:"py-1 mb-1"},[t._v(": "+t._s(t.form.created_at))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"grid grid-cols-2 gap-2 ml-1 md:ml-4"},[t._m(1),t._v(" "),a("span"),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Road Name")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.road_name))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Road Type")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.road_type))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Length of Road ")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.length)+" meter")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Breadth of Road")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.breadth)+" meter")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Rate")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.rate)+" per sq meter")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Amount")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": Rs. "+t._s(t.estimate.amount))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Deposit")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": Rs. "+t._s(t.estimate.deposit))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Total")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": Rs. "+t._s(t.estimate.total))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Estimate Submitted")]),t._v(" "),a("p",{staticClass:"py-1"},[t._v(": "+t._s(t.estimate.created_at))]),t._v(" "),a("p",{staticClass:"py-1"},[t._v("Status")]),t._v(" "),0==t.estimate.estimate_status?[a("p",{staticClass:"py-1 text-red-500"},[t._v(": Pending for Approval")])]:[a("p",{staticClass:"py-1 text-green-500"},[t._v(": Approved")])],t._v(" "),a("hr"),t._v(" "),a("hr"),t._v(" "),a("a",{staticClass:"px-4 py-2 mt-1 text-sm font-bold text-center text-white bg-green-500 border rounded hover:bg-green-400",attrs:{href:"#"},on:{click:function(e){t.modalA=!t.modalA}}},[t._v("Approve")]),t._v(" "),a("a",{staticClass:"px-2 py-2 mt-1 text-sm font-bold text-center text-white bg-blue-700 border rounded hover:bg-blue-600",attrs:{href:"#"},on:{click:function(e){t.modalEstimateEdit=!t.modalEstimateEdit}}},[t._v("Edit")])],2)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"py-1 mt-1"},[e("b",[this._v("Applicant Details")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"py-1 mt-1"},[e("b",[this._v("Estimate Details")])])}],!1,null,"2dbf849c",null);e.default=o.exports}}]);